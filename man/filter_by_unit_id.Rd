% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/filter_by_unit_id.R
\name{filter_by_unit_id}
\alias{filter_by_unit_id}
\title{Filter ANQ Psychiatry datasets by unit identifiers}
\usage{
filter_by_unit_id(
  MB = NULL,
  MP = NULL,
  PH = NULL,
  PB = NULL,
  FM = NULL,
  unit_ids,
  unit_col = unit_code,
  keep = TRUE,
  suffix = "_filtered"
)
}
\arguments{
\item{MB, MP, PH, PB, FM}{Data frames containing ANQ Psychiatry data.
Each corresponds to a specific dataset type (e.g., MB = main baseline, MP = main post, etc.).
You may provide any subset of these arguments.}

\item{unit_ids}{A vector of unit identifiers to keep or remove.}

\item{unit_col}{A bare (unquoted) column name identifying the unit variable
(e.g., \code{unit_code}, \code{unit_id}, or \code{unitid}). Defaults to \code{unit_code}.}

\item{keep}{Logical. If \code{TRUE}, keep only rows with matching unit identifiers;
if \code{FALSE}, remove them. Defaults to \code{TRUE}.}

\item{suffix}{Character string appended to the names of the returned data frames.
Defaults to \code{"_filtered"}.}
}
\value{
A named list of filtered data frames, each corresponding to one of the datasets
provided as input. The list elements are named using the original dataset names
plus the provided \code{suffix}.
}
\description{
Filters one or more ANQ Psychiatry datasets (\emph{MB}, \emph{MP}, \emph{PH}, \emph{PB}, \emph{FM})
by specific unit identifiers.
This helper function is designed for standardized ANQ data structures amended
with unit info (not part of regular ANQ reporting).
The identifying column for a psychiatric unit may vary in name
(e.g., \code{unit_code}, \code{unit_id}, or \code{unitid}).
}
\details{
You can pass any combination of the datasets \code{MB}, \code{MP}, \code{PH}, \code{PB}, and \code{FM}.
Only non-\code{NULL} data frames will be processed.
Each data frame must contain a column that identifies the unit (specified by \code{unit_col}).

The function supports two filtering modes:
\itemize{
\item \code{keep = TRUE} (default): keep only rows where the unit column matches \code{unit_ids}.
\item \code{keep = FALSE}: exclude rows where the unit column matches \code{unit_ids}.
}

The returned list contains only the filtered data frames, with names suffixed
by the string provided via \code{suffix} (default: \code{"_filtered"}).
}
\examples{
\dontrun{
# Filter MB and MP for specific units
filtered <- filter_by_unit_id(
  MB = MB,
  MP = MP,
  unit_ids = c("A1", "B2"),
  unit_col = unit_code,
  keep = TRUE,
  suffix = "_subset"
)

names(filtered)
#> [1] "MB_subset" "MP_subset"

# Filter using a different unit column name
filtered <- filter_by_unit_id(
  PH = PH,
  PB = PB,
  unit_ids = c(101, 103),
  unit_col = unit_id
)
}

}
